{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/PersonTable.js","services/person.js","components/Error.js","components/Notification.js","App.js","index.js"],"names":["FilterForm","filter","handler","value","onChange","PersonForm","name","number","nameHandler","numberHandler","type","Person","deleteHandler","id","onClick","PersonTable","persons","map","person","RegExp","test","baseUrl","axios","get","newPerson","post","delete","updatedPerson","put","Error","message","className","Notification","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","setFilter","notification","setNotification","error","setError","useEffect","personService","then","res","data","Filter","e","target","replace","preventDefault","personWithSameName","find","toLowerCase","window","confirm","setTimeout","catch","err","response","createdPerson","console","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2d571af7.chunk.js","sourcesContent":["import React from 'react';\n\nconst FilterForm = ({ filter, handler }) => (\n  <div>\n    filter persons:\n    {' '}\n    <input value={filter} onChange={handler} />\n  </div>\n);\nexport default FilterForm;\n","import React from 'react';\n\nconst PersonForm = ({\n  name, number, nameHandler, numberHandler,\n}) => (\n  <>\n    <div>\n      name:\n      {' '}\n      <input value={name} onChange={nameHandler} />\n    </div>\n    <div>\n      number:\n      <input type=\"tel\" value={number} onChange={numberHandler} />\n    </div>\n  </>\n);\n\nexport default PersonForm;\n","/* eslint-disable react/button-has-type */\nimport React from 'react';\n\nconst Person = ({\n  name, number, deleteHandler, id,\n}) => (\n  <tr>\n    <td>{name}</td>\n    <td>{number}</td>\n    <button id={id} onClick={deleteHandler} name={name}>\n      delete\n    </button>\n  </tr>\n);\nexport default Person;\n","import React from 'react';\nimport Person from './Person';\n\nconst PersonTable = ({ persons, filter, deleteHandler }) => (\n  <table>\n    <tbody>\n      {persons.map((person) => {\n        if (!person) return null;\n        if (filter) {\n          const filterRegex = new RegExp(filter, 'i');\n          if (filterRegex.test(person.name)) {\n            return (\n              <Person\n                name={person.name}\n                id={person.id}\n                number={person.number}\n                deleteHandler={deleteHandler}\n              />\n            );\n          }\n          return null;\n        }\n        return (\n          <Person\n            name={person.name}\n            id={person.id}\n            number={person.number}\n            deleteHandler={deleteHandler}\n          />\n        );\n      })}\n    </tbody>\n  </table>\n);\n\nexport default PersonTable;\n","import axios from 'axios';\n\nconst baseUrl = '/api/persons';\n\nconst getAll = () => axios.get(baseUrl);\n\nconst create = (newPerson) => axios.post(baseUrl, newPerson);\nconst deletePerson = (id) => axios.delete(`${baseUrl}/${id}`);\nconst update = (id, updatedPerson) => axios.put(`${baseUrl}/${id}`, updatedPerson);\n\nexport default {\n  getAll, create, deletePerson, update,\n};\n","import React from 'react';\n\nconst Error = ({ message }) => {\n  if (message === null) return null;\n  return <div className=\"error\">{message}</div>;\n};\n\nexport default Error;\n","import React from 'react';\n\nconst Notification = ({ message }) => {\n  if (message === null) return null;\n  return <div className=\"notification\">{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from 'react';\nimport FilterForm from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport PersonTable from './components/PersonTable';\nimport personService from './services/person';\nimport Error from './components/Error';\nimport Notification from './components/Notification';\nimport './index.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [notification, setNotification] = useState(null);\n  const [error, setError] = useState(null);\n\n  // HANDLERS\n\n  const handleNameChange = (e) => setNewName(e.target.value);\n\n  const handleNumberChange = (e) => setNewNumber(e.target.value);\n\n  const handleFilterChange = (e) => {\n    const replaceRegex = /[^a-zöäå ]/gi;\n    setFilter(e.target.value.replace(replaceRegex, ''));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    // check if person is already in PhoneBook\n    const personWithSameName = persons.find(\n      (person) => person.name.toLowerCase() === newName.toLowerCase(),\n    );\n    if (personWithSameName) {\n      if (\n        // eslint-disable-next-line no-alert\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with new one?`,\n        )\n      ) {\n        personService\n          .update(personWithSameName.id, {\n            name: newName,\n            number: newNumber,\n          })\n          .then((res) => {\n            setPersons([\n              ...persons.filter((person) => person.name !== newName),\n              res.data,\n            ]);\n            setNotification(`${res.data.name}'s number updated`);\n            setTimeout(() => setNotification(null), 5000);\n          })\n          .catch((err) => {\n            setError(`${err.response.data.error}`);\n            setTimeout(() => setError(null), 5000);\n          });\n      }\n    } else {\n      personService\n        .create({ name: newName, number: newNumber })\n        .then((res) => {\n          const createdPerson = res.data;\n          setPersons([...persons, res.data]);\n          setNotification(`Person ${createdPerson.name} added to phonebook`);\n          setTimeout(() => setNotification(null), 5000);\n        })\n        .catch((err) => {\n          setError(`${err.response.data.error}`);\n          setTimeout(() => setError(null), 5000);\n        });\n    }\n\n    // empty form\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const handleDelete = (e) => {\n    personService\n      .deletePerson(e.target.id)\n      .then(() => {\n        setPersons(persons.filter((person) => (person.id !== e.target.id)));\n        setNotification(`Person ${e.target.name} removed from phonebook`);\n        setTimeout(() => setNotification(null), 5000);\n      })\n      .catch((err) => {\n        console.error(err);\n        setError(err);\n        setTimeout(() => setError(null), 5000);\n      });\n  };\n\n  // UseEffect\n\n  useEffect(() => {\n    personService.getAll().then((res) => {\n      setPersons(res.data);\n    });\n  }, []);\n\n  return (\n    <div>\n      <div>\n        <h2>Phonebook</h2>\n        <Error message={error} />\n        <Notification message={notification} />\n        <form>\n          <div>\n            <FilterForm handler={handleFilterChange} />\n            <PersonForm\n              name={newName}\n              number={newNumber}\n              nameHandler={handleNameChange}\n              numberHandler={handleNumberChange}\n            />\n          </div>\n          <div>\n            <button type=\"submit\" onClick={handleSubmit}>\n              add\n            </button>\n          </div>\n        </form>\n      </div>\n      <div>\n        <h2>Numbers</h2>\n        <PersonTable\n          persons={persons}\n          filter={filter}\n          deleteHandler={handleDelete}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","/* eslint-disable react/react-in-jsx-scope */\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}